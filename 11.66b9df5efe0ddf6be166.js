(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{316:function(s,a,t){"use strict";t.r(a);var n=function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("b-container",{staticClass:"document"},[t("h1",[s._v("Workers (preview)")]),s._v(" "),t("h2",[s._v("Concept")]),s._v(" "),t("p",[s._v("In case you want to implement tasks that perform heavy computation or you are using a library that uses blocking io, you should move these tasks to worker processes. Each worker process has it's own independent pipeline that pushes updates to the parent process. In addition, you can provide a worker with a hash of tasks that the worker may invoke on the parent process.")]),s._v(" "),t("p",[t("img",{attrs:{src:"/images/workers.svg",alt:""}})]),s._v(" "),t("h2",[s._v("API Preview")]),s._v(" "),t("p",[t("strong",[s._v("main.js")])]),s._v(" "),t("pre",[t("code",{staticClass:"language-js"},[t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" Pipeline = "),t("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),t("span",{staticClass:"hljs-string"},[s._v("'@phylum/pipeline'")]),s._v(")\n\n"),t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" worker = Pipeline.worker({\n    "),t("span",{staticClass:"hljs-attr"},[s._v("entry")]),s._v(": "),t("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v(".resolve("),t("span",{staticClass:"hljs-string"},[s._v("'./worker.js'")]),s._v("),\n    "),t("span",{staticClass:"hljs-attr"},[s._v("tasks")]),s._v(": {foo}\n})\n\n"),t("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("foo")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("ctx")]),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-number"},[s._v("6")]),s._v("\n}\n\nPipeline.cli("),t("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" ctx => {\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" result = "),t("span",{staticClass:"hljs-keyword"},[s._v("await")]),s._v(" ctx.use(worker)\n    "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(result)\n})")])]),s._v(" "),t("p",[t("strong",[s._v("worker.js")])]),s._v(" "),t("pre",[t("code",{staticClass:"language-js"},[t("span",{staticClass:"hljs-built_in"},[s._v("module")]),s._v(".exports = "),t("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" ctx => {\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" a = "),t("span",{staticClass:"hljs-keyword"},[s._v("await")]),s._v(" ctx.use("),t("span",{staticClass:"hljs-string"},[s._v("'foo'")]),s._v(")\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" b = "),t("span",{staticClass:"hljs-keyword"},[s._v("await")]),s._v(" ctx.use(bar)\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" a * b\n}\n\n"),t("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("bar")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("ctx")]),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-number"},[s._v("7")]),s._v("\n}")])]),s._v(" "),t("pre",[t("code",{staticClass:"language-bash"},[s._v("node main.js\n"),t("span",{staticClass:"hljs-comment"},[s._v("# 42")])])])])};n._withStripped=!0;var e=t(52),l=Object(e.a)({},n,[],!1,null,null,null);l.options.__file="src/pages/manual-workers.md";a.default=l.exports}}]);