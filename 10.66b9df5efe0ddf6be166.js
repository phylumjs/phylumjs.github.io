(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{317:function(s,a,t){"use strict";t.r(a);var n=function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("b-container",{staticClass:"document"},[t("h1",[s._v("Upgrade to version 2")]),s._v(" "),t("h3",[t("code",[s._v("ctx.data")])]),s._v(" "),t("p",[t("code",[s._v("ctx.data")]),s._v(" is now removed because of it's missleading name."),t("br"),s._v("\nIf you previously stored internal data on it, use local variables instead.")]),s._v(" "),t("p",[s._v("If you were exposing public api to code outside the task, use "),t("code",[s._v("ctx.exports")]),s._v(":")]),s._v(" "),t("pre",[t("code",{staticClass:"language-js"},[t("span",{staticClass:"hljs-comment"},[s._v("// Removed api:")]),s._v("\n"),t("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("task")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("ctx")]),s._v(") ")]),s._v("{\n    ctx.data.foo = "),t("span",{staticClass:"hljs-string"},[s._v("'bar'")]),s._v("\n    ctx.data.bar = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v("'Hello World!'")]),s._v(")\n}\n\n"),t("span",{staticClass:"hljs-comment"},[s._v("// Should be replaced with:")]),s._v("\n"),t("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("task")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("ctx")]),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("let")]),s._v(" foo = "),t("span",{staticClass:"hljs-string"},[s._v("'bar'")]),s._v("\n    ctx.exports.bar = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" "),t("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),t("span",{staticClass:"hljs-string"},[s._v("'Hello World!'")]),s._v(")\n}")])]),s._v(" "),t("p",[s._v("In addition, context objects can now be accessed from the pipeline:")]),s._v(" "),t("pre",[t("code",{staticClass:"language-js"},[s._v("pieline.getContext(task).exports.bar()\n"),t("span",{staticClass:"hljs-comment"},[s._v("// -> 'Hello World!'")])])]),s._v(" "),t("h3",[t("code",[s._v("Event: 'dispose'")])]),s._v(" "),t("p",[s._v("The "),t("code",[s._v("addDisposal")]),s._v(" function is now deprecated and will be removed in the next major version."),t("br"),s._v("\nReturn a promise from the event listener instead.")]),s._v(" "),t("pre",[t("code",{staticClass:"language-js"},[t("span",{staticClass:"hljs-comment"},[s._v("// Deprecated api:")]),s._v("\n"),t("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("task")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("ctx")]),s._v(") ")]),s._v("{\n    ctx.on("),t("span",{staticClass:"hljs-string"},[s._v("'dispose'")]),s._v(", addDisposal => {\n        addDisposal(somePromise)\n    })\n}\n\n"),t("span",{staticClass:"hljs-comment"},[s._v("// Should be transformed into:")]),s._v("\n"),t("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("task")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("ctx")]),s._v(") ")]),s._v("{\n    ctx.on("),t("span",{staticClass:"hljs-string"},[s._v("'dispose'")]),s._v(", () => {\n        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" somePromise\n    })\n    "),t("span",{staticClass:"hljs-comment"},[s._v("// or")]),s._v("\n    ctx.on("),t("span",{staticClass:"hljs-string"},[s._v("'dispose'")]),s._v(", "),t("span",{staticClass:"hljs-keyword"},[s._v("async")]),s._v(" () => {\n        "),t("span",{staticClass:"hljs-keyword"},[s._v("await")]),s._v(" somePromise\n    })\n}")])])])};n._withStripped=!0;var l=t(52),e=Object(l.a)({},n,[],!1,null,null,null);e.options.__file="src/pages/manual-upgrade.md";a.default=e.exports}}]);